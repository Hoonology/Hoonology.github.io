---
date: 2023-04-18 02:00:00
layout: post
title: 서비스 노출
subtitle: AWS 서비스 서비스 노출에 대하여
description: CloudFront - CDN 서비스 ' 저지연성과 고속전송 속성을 지닌 콘텐츠 배포 기능 제공'
image: https://res.cloudinary.com/dvqcvocet/image/upload/v1681432465/dev-jeans_%E1%84%87%E1%85%A9%E1%86%A8%E1%84%89%E1%85%A1%E1%84%87%E1%85%A9%E1%86%AB_y5n0eh.png
optimized_image: https://res.cloudinary.com/dvqcvocet/image/upload/v1681432465/dev-jeans_%E1%84%87%E1%85%A9%E1%86%A8%E1%84%89%E1%85%A1%E1%84%87%E1%85%A9%E1%86%AB_y5n0eh.png 
category: AWS
tags:
  - AWS
  - cloud
  - CloudFront
  - Route53 
author: Hoonology
comments: true

---

# CloudFront
AWS(Amazon Web Services)에서 제공하는 글로벌 콘텐츠 전송 네트워크(CDN) 서비스  
- CloudFront는 **안정적이고 빠른 글로벌 콘텐츠 전송**을 위한 AWS의 핵심 서비스 중 하나이다.

> CloudFront는 **세계 각지의 엣지 로케이션(Edge Location)**을 사용하여 사용자가 콘텐츠에 빠르게 액세스할 수 있도록 합니다. 엣지 로케이션은 전 세계에 분산된 캐시 서버로, 사용자와 가장 가까운 엣지 로케이션에서 콘텐츠를 제공함으로써 지연 시간을 최소화합니다.

> CloudFront는 다양한 유형의 콘텐츠를 지원합니다. 정적 웹 사이트, 동영상, 애플리케이션, API 등을 빠르고 안정적으로 전달할 수 있습니다. 또한, CloudFront는 AWS의 다른 서비스와 쉽게 통합할 수 있어 사용이 용이합니다.

> CloudFront는 또한 다양한 보안 기능을 제공합니다. HTTPS를 사용하여 콘텐츠를 암호화하고, AWS WAF(Web Application Firewall)를 통해 웹 어플리케이션의 보안을 강화할 수 있습니다.

## CloudFront 핵심 개념
- 엣지 로케이션은 주로 대도시에 위치한다. AWS 리전과의 위치가 같지는 않다.
- 엣지 캐시
  - 지역별 엣지 캐시( CloudFront의 기본 기능 ) : 오리진 웹 서버와 엣지 코레이션 사이에 위치하여 사용자에게 직접 콘텐츠 전송
  - 비교적 인기가 적은 엣지 로케이션에서 객체를 삭제해 인기가 많은 콘텐츠를 제공하기 위해 여유 공간 확보
    - 지역별 엣지 캐시는 지역 로케이션 보다 높은 수준의 캐싱 능력을 바탕으로 캐싱 데이터를 오래 유지할 수 있게 된다.
    - 사용자의 콘텐츠 요청에 오리진 웹 서버를 돌리지 않고 지역별 엣지 캐시로 사용자 요청에 대응하면서 콘텐츠 제공 성능이 높아진다.

## CloudFront 활용과 적용
### 활용
- **정적 콘텐츠 캐싱** : 사진, 영상, 자바스크립트, 스타일시트 등의 정적 콘텐츠 전송 속도를 높여주고 사용자는 엣지 로케이션을 통해 요청한 콘텐츠를 제공 받는다.
- **동적 콘텐츠 네트워크 최적화** : 콘텐츠 가속화 기능 제공, EC2 서버에서 실행중인 애플리케이션 또는 웹사이트를 CloudFront와 **통합**할 수 있다.
- DDoS 공격 대응 : CloudFront는 OSI 모델의 L3, L4, L7을 보호할 수 있는 AWS Shield, WAF를 통합하여 방어할 수 있다.
  - 강화된 보안성 CloudFront는 SSL(HTTPS)방식의 보안 기능을 제공하며, 보안이 강화된 API, SSL/TSL 적용, advanced SSL 기능을 자동으로 적용할 수
    있습니다. 더불어 모든 인프라와 프로세스는 중요 콘텐츠의 보안 수준을 유지하기 위해 PCI, DDS, HIPAA, ISO 규정을 준수합니다.

### 적용
#### **경로 패턴 매칭** : 애플리케이션의 URL 경로 패턴에 따라 다양한 캐시 제어 동작 설정
  - 경로 패턴에 따라 HTTP/HTTPS 프로토콜 설정, 헤어 또는 캐싱 옵션 설정, 쿠키 및 쿼리 문자열 포워딩 설정, 접근 제한등의 방식으로 특정 오리진으로 요청을 전송

#### 헤더 
- 헤더 값을 통해 요청 헤더를 **오리진 캐시**로 포워딩
  - 동일한 사이트를 접속한 노트북 사용자와 스마트폰 사용자의 요청에 각기 다른 반응을 제공

#### 쿼리(query) 문자열 및 쿠키
오리진으로 정보를 전달하기 위해 쿼리 문자열을 사용
- 하나 이상의 파라미터를 & 기호로 연결한다.

#### 서명 URL, 서명 쿠키
- 서명 URL  
  정적 콘텐츠(html 등)를 S3 버킷에 옮긴 뒤 CloudFront의 **서명 URL 방식**을 통하여 **비인가 접근을 막을 수 있다.**
  - 만료일 및 만료 시간 등의 부가 정보가 포함돼 있어 콘텐츠에 대한 접근을 조금 더 세심하게 제어할 수 있다.
- 서명 쿠키
  기능적인 부분은 서명 URL과 같음, 다른 점이라면, **HTTP 쿠키에 추가 정보를 넣는다**.
  - 다수 객체에 대한 접근 제어, URL 변경 없는 동일 객체에 대한 접근 제어
  - Set-Cookie 헤더가 사용자 계정에 전달 -> 사용자 디바이스의 쿠키에 적용
    - 사용자가 제한 객체에 대한 접근 요청 시, 브라우저는 요청에 포함된 쿠키를 포워딩 -> CloudFront가 쿠키 속성을 확인 후 접근 허용/차단 결정

## 오류 처리 기능
콘텐츠 요청 시 오리진 서버가 HTTP 4xx, 5xx로 응답 -> **사용자에게 커스텀 오류 페이지 제공**
- CloudFront는 S3에 정적 페이지 제공 여지 부여 -> 최소 유지시간(TTL) 정의 -> 캐시 오류를 얼마나 오래 유지할지 조절 가능


<br>

# Route53
**관리형 DNS**(Domain Name Service)
- 사용자의 요청을 **EC2 인스턴스**, **ELB 로드밸런서**, **S3 버킷** 등 AWS 내 인프라에 연결시킨다.
- 리전과 독립적으로 작동
  - **다수의 리전을 교차 연결** 
  - 다수의 리전과 VPC간 DNS 주소 변환 가능

Route53의 주요 DNS 기록 타입
- A 레코드 : 도메인 이름을 IPv4 주소에 매핑하는 레코드입니다.
- AAAA 레코드 : 도메인 이름을 IPv6 주소에 매핑하는 레코드입니다.
- CNAME 레코드 : 도메인 이름을 다른 도메인 이름에 매핑하는 레코드입니다.
- MX 레코드 : 메일 서버를 식별하는 레코드입니다.
- NS 레코드 : DNS 네임 서버를 식별하는 레코드입니다.
- PTR 레코드 : IPv4 또는 IPv6 주소를 도메인 이름으로 매핑하는 레코드입니다.
- SOA 레코드 : DNS 존의 속성을 식별하는 레코드입니다.
- SPF 레코드 : 이메일 인증을 지원하는 레코드입니다.
- SRV 레코드 : 도메인 이름에서 사용 가능한 서비스를 식별하는 레코드입니다.
- TXT 레코드 : 도메인 이름에 대한 임의의 텍스트 정보를 포함하는 레코드입니다.

## 라우팅 정책 지원
### 가중치 라운드 로빈 ( Weighted Round Robin )
여러 리소스(예: EC2 인스턴스, 로드 밸런서, IP 주소)에 대한 트래픽을 가중치를 기반으로 분산하는 방식  
각 리소스에 가중치를 할당하여, 더 큰 가중치가 있는 리소스는 더 많은 트래픽을 처리  

### 지연 기반 라우팅 ( Latency-Based Routing )
사용자의 지리적 위치와 가장 가까운 위치에 있는 리소스로 DNS 쿼리를 전달하여, 지연 시간을 최소화하는 방식  
이 방식은 사용자 경험을 향상시키고, 전 세계적으로 분산된 애플리케이션 및 서비스에 대해 효과적  


### 장애 대응 라우팅(Failover Routing)
메인 리소스의 장애 상황 시 백업 리소스로 DNS 쿼리를 전환하여, 가용성을 높이는 방식  
예를 들어, 주 서버에 장애가 발생할 경우, 백업 서버로 DNS 쿼리를 전환하여 서비스를 계속 제공할 수 있다.


### 지역 DNS 라우팅(Geo DNS Routing)
사용자의 위치에 따라 지역별로 서로 다른 IP 주소를 반환하여, 지역별로 다른 애플리케이션 및 서비스에 대한 접근을 가능하게 한다.   
이 방식은 지역별로 서로 다른 언어, 화폐, 세금 및 규제 등의 요구사항을 충족시키는 글로벌 애플리케이션에 적합

<br>
<br>
