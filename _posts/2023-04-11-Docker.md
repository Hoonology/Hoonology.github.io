---
date: 2023-04-11 07:15:19
layout: post
title: Docker
subtitle: 도커의 필요성 - 컨테이너 방식으로 애플리케이션을 실행한다
description: 도커의 필요성 - 실행 환경에 구애받지 않고 애플리케이션을 실행할 수 있다.
image: https://res.cloudinary.com/dvqcvocet/image/upload/v1681198236/dev-jeans_r2fkxp.png
optimized_image:  https://res.cloudinary.com/dvqcvocet/image/upload/v1681198236/dev-jeans_r2fkxp.png
category: Docker
tags:  
  - Docker
  - nginx
  - postgresql
author: Hoonology
paginate: true
---


# Achievement Goals
- 컨테이너 기술이 무엇인지, Docker가 왜 필요한지 알 수 있다.
- 컨테이너와 이미지, 레지스트리가 무엇인지 이해할 수 있다.
- 대표적인 레지스트리인 Docker Hub에서 이미지를 검색하고, 사용할 수 있다.
- 한 개의 이미지를 이용해서 컨테이너를 구축할 수 있다.
- 두 개 이상의 이미지를 이용해서 컨테이너를 구축하고 서로가 어떻게 연결되는 지 알 수 있다.
- Docker CLI에서 명령어를 사용해서 이미지를 생성/수정/배포하고, 컨테이너를 생성/삭제할 수 있다.
- Dockerfile을 이용해 이미지를 생성할 수 있다.
- 애플리케이션을 컨테이너화할 수 있다.

# Docker
[도커설치](https://docs.docker.com/desktop/install/mac-install/)  

![docker](https://res.cloudinary.com/dvqcvocet/image/upload/v1681195931/2880px-Docker__28container_engine_29_logo.svg_kvn7uz.png)

***"컨테이너 방식으로 애플리케이션을 실행한다"***  
***"실행 환경에 구애받지 않고 애플리케이션을 실행할 수 있다!"***

<br>

# 왜 Docker인가 ?

## 컨테이너 방식의 장점
1. [**의존성 충돌 문제를 해결**](#1-의존성-출동-문제를-해결한다)한다.
  > 의존성이 충돌할 때 : 두 애플리케이션의 일정한 버전으로 의존 관계가 있을 때 하나 이상의 애플리케이션과 버전이 다를 경우 제대로 된 실행을 보장할 수 없다.  
  이에 컨테이너 기술은 위 문제를 해결한다. 어떠한 의존성도 공유하지 않고, 각자 고유의 의존성을 포함한다.
2. [**개발과 배포 환경을 일치**시킨다.](#2-개발과-배포-환경을-일치시킨다)
3. **수평 확장**을 쉽게 해준다.
4. 각 서버에 새로운 내용을 **쉽게 배포**시킨다.


## 1. 의존성 출동 문제를 해결한다.
### 컨테이너가 하는 일
- 한 컴퓨터 안에 여러 대의 컨테이너 존재 = 애플리케이션 실행 환경 격리
- 한 컴퓨터에 서로 다른 버전의 php 설치 조건 : 컨테이너 하나 하나가 **애플리케이션 실행**에 **높은 수준의 격리를 제공**

#### 격리를 한다고?
1. 프로세스
  - 특정 컨테이너에서 작동하는 프로세스는 그 컨테이너 안에서만 액세스 가능
2. 네트워크
  - 컨테이너 하나에 하나의 IP 주소 할당
3. 파일 시스템
  - 컨테이너 안에서 사용되는 파일 시스템은 **구획화**됨 -> 해당 컨테이너에서의 명령이나 파일 등의 액세스 제한 가능


## 2. 개발과 배포 환경을 일치시킨다.
### 문제 상황
#### 개발팀의 문제
개발팀 구성원들은 버전이 서로 다른 애플리케이션을 각자의 로컬 환경에 설치하여 개발을 진행한다.  
> 런타임 환경 버전 통일, 시스템 환경 변수 구성 등의 과정이 필요하다.  
각자의 OS에서 애플리케이션 등을 설치하는 과정 또한 다르다.  
문제가 발생하면 문제 해결에 대한 시간 소모가 커지게 되는 문제도 생긴다.

### Docker로 해결 `122
PostgreSQL을 설치하는 가정하에,
```bash
docker run --name postgres -e POSTGRES_PASSWORD=mysecret -d postgres
```

> 애플리케이션 구성 자체가 컨테이너화 된것이라면, YAML과 명령어 하나로 애플리케이션 실행 환경이 구성 완료된다.
```bash
docker-compose up
``` 

- OS에 상관 없이 즉시 애플리케이션 실행 환경 구성 가능
- 개발 컨테이너 위에서 모든 개발팀이 동일한 환경 하에 개발 진행 가능




#### 배포 시의 문제
이제는 배포의 패러다임이 달라졌다. 서버에 파일 하나하나를 업로드하는 방식은 마치 물자를 하나하나 배에 옮기는 이전의 방식이라고 볼 수 있다.   
서버도 이제는 컨테이너에 담긴 애플리케이션을 실행하는 방식으로 서비스를 제공한다.




















