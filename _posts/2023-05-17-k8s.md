---
date: 2023-05-17 00:00:00
layout: post
title: Kubernetes( k8s )
subtitle: Kubernetes, k8s
description: 오픈소스로 만들어진 컨테이너 오케스트레이션 도구
image: https://res.cloudinary.com/dvqcvocet/image/upload/v1684335849/%E1%84%8F%E1%85%AE%E1%84%87%E1%85%A5%E1%84%8C%E1%85%B5%E1%86%AB%E1%84%89%E1%85%B3_yoqeyy.png
optimized_image: https://res.cloudinary.com/dvqcvocet/image/upload/v1684335849/%E1%84%8F%E1%85%AE%E1%84%87%E1%85%A5%E1%84%8C%E1%85%B5%E1%86%AB%E1%84%89%E1%85%B3_yoqeyy.png
category: k8s
tags:  
  - kubernetes
  - k8s
  - 오케스트레이션
  - orchestrate
author: Hoonology
paginate: true
---

# 쿠버네티스 ( Kubernetes, k8s )
- 오픈소스로 만들어진 컨테이너 오케이스트레이션 도구
> 오케스트레이션 : **컨테이너화된 애플리케이션의 배포**, **확장 및 운영을 관리하고 자동화하는 프로세스**입니다. 컨테이너는 애플리케이션과 해당 종속성을 패키징하는 가볍고 이식 가능한 방법을 제공하여 다양한 컴퓨팅 환경에서 일관되게 실행할 수 있도록 합니다.

> "to plan and organize"

- 컨테이너화된 애플리케이션을 자동으로 배포, 스케일링하는 등의 관리 기능을 제공
  - 각기 다른 환경(온프레미스 서버, VM, 클라우드)에 대응 가능
- 수십~수백 개의 컨테이너를 관리하고자 할 때 보다 더 잘 관리하기 위한 툴
  - 아키텍처의 변화 : 모놀리식 -> 마이크로서비스(MSA)
  - 컨테이너 개수 증가
  - 확장성을 고려한 스케일링 

> Google이 일주일에 수십억 개의 컨테이너들을 운영하게 해 준 원칙들에 따라 디자인되었기 때문에, 쿠버네티스는 운영팀의 규모를 늘리지 않고도 확장될 수 있습니다.

## 사용하지 말아야 할 상황
- 여러 티어로 나뉘지 않은 모놀리식 아키텍처
  - 모놀로식 아키텍처는 MSA 분해 전략을 세우는 것을 먼저 진행한다.
- 컨테이너의 개수가 적은 경우
  - docker-compose로도 충분하다.
- 단순한 아키텍처 + 스케일링이 필요하지 않은 경우

## 사용해야하는 상황
- **MSA를 컨테이너 방식**으로 운영하는 조직이 확장성을 고려할 때
- 무중단(고가용성)을 제공해야할 때
- 자가치유, 배치실행, 구성관리, 로드밸런싱 등

> AWS의 제공요소와 유사하지만, **비용문제**를 고려했을 때 **쿠버네티스**를 사용합니다.

### 사용 예시
- 쿠버네티스를 통해 온프레미스 상에서 클라우드 인프라 구성함
- 저렴한 클라우드 서비스의 일부분을 도입하여 하이브리드의 형태로 구성
- 쿠버네티스로 구성한 인프라를 통째로 AWS에 마이그레이션
  - AWS EKS



#### 기존 : 코드 버그 수정 및 업데이트 시, 기존에는 모든 컨테이너를 종료하고 새로운 버전을 올린 뒤, 컨테이너를 켜야한다.
![ku](/assets/img/kubernetes/k8s2.png)
- 웹사이트의 일시적인 다운 현상 발생

#### 쿠버네티스를 사용 : 컨테이너의 신규 버전을 차례대로 업데이트 
![ku](/assets/img/kubernetes/k8s1.png)
- 웹사이트의 다운 현상 X

### 웹사이트 배포 시 쿠버네티스의 필요성 
- 도커 혹은 node.js를 사용하여 웹사이트를 AWS를 통해 배포하고자 한다면, 이 때는 도커를 업로드하고 배포하는 것이 전부이기에 쿠버네티스의 중요성을 알아야합니다.
- **MSA**를 갖고 있다면, 기능이 다양한 컨테이너가 존재하게 될텐데, 이 모든 컨테이너는 **동시에 업로드**가 되어야한다.
  - 수 많은 컨테이너를 가질 때 문제가 생긴다. ( 컨테이너 하나가 죽으면 재빠르게 재시작을 해야한다. ) 
  ![ku](/assets/img/kubernetes/k8s3.png)

  - 쿠버네티스가 그 죽은 컨테이너를 **자동으로 재시작**한다.
  ![ku](/assets/img/kubernetes/k8s4.png)


# 쿠버네티스 작동 원리
#### 쿠버네티스 아키텍처
![ku](/assets/img/kubernetes/k8s5.png)
제어판(Control Plane) 컴포넌트