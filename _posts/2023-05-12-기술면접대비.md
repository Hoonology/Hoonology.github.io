---
date: 2023-05-12 01:30:00
layout: post
title: Terraform - 기술면접 질문 대비
subtitle: Terraform
description: 1) 가변적(mutable) 인프라와 불변적(immutable) 인프라의 차이
             2) Terraform은 어떤 방식으로 인프라를 최신 상태로 유지할 수 있는 걸까요?
image: https://res.cloudinary.com/dvqcvocet/image/upload/v1683864943/dev-jeans_kadf7q.png
optimized_image: https://res.cloudinary.com/dvqcvocet/image/upload/v1683864943/dev-jeans_kadf7q.png
category: docker
tags:  
  - terraform
  - 테라폼
  - IaC
  - mutable
  - immutable
author: Hoonology
paginate: true
---

# 1 
#### 가변적(mutable) 인프라와 불변적(immutable) 인프라의 차이는 무엇인가요?

> 이 둘의 차이는 **변경 처리**에 달려있다.


- 가변적 인프라 : 인프라 구성 요소가 프로비저닝된 후 구성 및 상태를 수정할 수 있는 기존 접근 방식을 나타냅니다. 이 모델에서는 설정 수정, 소프트웨어 업데이트 설치 또는 구성 조정과 같이 실행 중인 인프라를 직접 변경할 수 있습니다.
  - 변경 사항은 기존 구성 요소에 직접 적용되므로 잠재적으로 구성 드리프트가 발생하고 인프라 전체에서 일관성을 유지하기가 더 어려워집니다.
  - 디버깅 시간이 오래 걸린다.

- 불변적 인프라 : 인프라 구성 요소가 불변으로 취급되는 접근 방식,  기존 인프라를 수정하는 대신 새 인스턴스 또는 구성 요소를 생성하고 이전 항목을 교체하여 변경 또는 업데이트가 이루어집니다. 원래 인프라는 삭제되고 원하는 변경 사항이 통합된 새 버전으로 대체됩니다.
  - 모든 변경 사항에 대해 새롭고 일관된 버전의 인프라를 생성하여 일관성을 강화하여 관리를 단순화하고 구성 문제의 가능성을 줄입니다.
  - **IaC 도구를 사용**하여 자동화와 일관성을 촉진한다.
  - 개별 버전 관리 - 각 인프라 버전은 서로 독립적 - 동시에 실행되는 두 가지 버전이 없다.
  - **수정하는 대신 교체**
  

<a align = "center">*전반적으로 변경 불가능한 인프라는 확장성, 일관성 및 안정성 측면에서 이점을 제공하지만 변경 가능한 인프라에 비해 더 많은 사전 계획 및 자동화가 필요할 수 있습니다.*</a>

# 2
#### Terraform의 선언적 방식으로 작성된 코드는 항상 인프라의 최신 상태를 의미합니다. Terraform은 어떤 방식으로 인프라를 최신 상태로 유지할 수 있는 걸까요?

Terraform은 **선언적 방식**으로 인프라를 정의하고 관리할 수 있는 **코드형 인프라(IaC) 도구**입니다. Terraform을 사용하면 일반적으로 HCL(HashiCorp 구성 언어)로 작성된 Terraform 구성 파일을 사용하여 인프라의 원하는 상태를 정의합니다.

Terraform을 실행하면 구성 파일에 설명된 **원하는 상태와 인프라의 현재 상태를 비교**합니다. 인프라를 원하는 상태로 만드는 데 필요한 차이점이나 **변경 사항을 식별**합니다. 그런 다음 Terraform은 그에 따라 **인프라 리소스를 생성, 업데이트 또는 삭제하는 데 필요한 작업을 계획하고 실행**합니다.


인프라를 최신 상태로 유지하는 Terraform의 기능은 핵심 원칙에서 비롯됩니다.
<p align = "center"> 1. 상태 관리</p>

Terraform은 관리 인프라의 현재 상태를 기록하는 상태 파일을 유지 관리합니다. 이 파일은 생성된 리소스와 해당 구성을 추적합니다. 후속 실행에서 Terraform은 이 상태 파일을 읽고 원하는 상태를 실제 상태와 조정하는 데 필요한 변경 사항을 결정합니다.

 <p align = "center">2. 실행 계획</p>

**terraform plan**을 실행하면 Terraform이 구성 파일과 현재 상태를 분석하여 **실행 계획을 생성**합니다. 이 계획은 Terraform이 인프라를 업데이트하기 위해 수행할 작업을 보여줍니다. **생성, 수정 또는 폐기될 리소스를 강조 표시**합니다.

<p align = "center">3. Idempotent 업데이트 </p>

Terraform은 **Idempotent(멱등성 - 결과가 달라지지 않는 성질) 방식**으로 인프라에 업데이트를 적용합니다. 이는 Terraform이 필요한 변경 사항만 적용되도록 하고 **중복 수정을 수행하지 않음을 의미**합니다. 원하는 상태가 현재 상태와 일치하면 Terraform은 아무런 조치도 취하지 않습니다.

<p align = "center"> 4. 종속성 관리 </p>

Terraform은 **리소스 간의 종속성을 자동으로 관리**합니다. **구성에 지정된 종속성에 따라 리소스를 생성, 업데이트 또는 삭제해야 하는 올바른 순서를 결정**합니다. 이렇게 하면 변경 사항이 일관되고 안정적인 방식으로 적용됩니다.


이러한 원칙을 활용하여 Terraform을 사용하면 **시간 경과에 따라 인프라를 쉽게 추적하고 업데이트**할 수 있습니다. 인프라 구성에 변경 사항을 적용할 수 있으며 Terraform은 중단을 최소화하고 일관성을 유지하면서 원하는 상태와 일치하도록 인프라를 지능적으로 업데이트합니다.