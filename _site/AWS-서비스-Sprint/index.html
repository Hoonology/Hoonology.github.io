<!DOCTYPE html>
<html lang="ko" class="no-js">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    

    
    

    
    

    
    

    <title>(Sprint) 도메인 연결과 CDN 및 HTTPS적용 | Hoonology</title>
    <meta name="description" content="(Sprint) 도메인 연결과 CDN 및 HTTPS적용">
    
        <meta name="keywords" content="AWS, cloud, CloudFront, Route53, Sprint">
    

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="(Sprint) 도메인 연결과 CDN 및 HTTPS적용 | Hoonology">
    <meta name="twitter:description" content="(Sprint) 도메인 연결과 CDN 및 HTTPS적용">

    
        <meta property="twitter:image" content="https://res.cloudinary.com/dvqcvocet/image/upload/v1681432465/dev-jeans_%E1%84%87%E1%85%A9%E1%86%A8%E1%84%89%E1%85%A1%E1%84%87%E1%85%A9%E1%86%AB_y5n0eh.png">
    
    
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="http://localhost:4000/AWS-%EC%84%9C%EB%B9%84%EC%8A%A4-Sprint/">
    <meta property="og:title" content="(Sprint) 도메인 연결과 CDN 및 HTTPS적용 | Hoonology">
    <meta property="og:image" content="https://res.cloudinary.com/dvqcvocet/image/upload/v1681432465/dev-jeans_%E1%84%87%E1%85%A9%E1%86%A8%E1%84%89%E1%85%A1%E1%84%87%E1%85%A9%E1%86%AB_y5n0eh.png">
    <meta property="og:description" content="(Sprint) 도메인 연결과 CDN 및 HTTPS적용">
    <meta property="og:site_name" content="Hoonology | Welcome to Hoony's Blog !">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="Hoonology">
    <meta name="msapplication-TileColor" content="#141414">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#141414">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="canonical" href="http://localhost:4000/AWS-%EC%84%9C%EB%B9%84%EC%8A%A4-Sprint/">
    <link rel="alternate" type="application/rss+xml" title="Hoonology | Welcome to Hoony's Blog !" href="http://localhost:4000/feed.xml" />

    <!-- Include extra styles -->
    

    <!-- JavaScript enabled/disabled -->
    <script>
        document.querySelector('html').classList.remove('no-js');
    </script>
</head>

    <body class="has-push-menu">
        





        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 1000 1000"><path d="M969.8,870.3c27,27.7,27,71.8,0,99.1C955.7,983,937.9,990,920,990c-17.9,0-35.7-7-49.7-20.7L500,599L129.6,969.4C115.6,983,97.8,990,79.9,990s-35.7-7-49.7-20.7c-27-27.3-27-71.4,0-99.1L400.9,500L30.3,129.3c-27-27.3-27-71.4,0-99.1c27.3-27,71.8-27,99.4,0L500,400.9L870.4,30.2c27.7-27,71.8-27,99.4,0c27,27.7,27,71.8,0,99.1L599.1,500L969.8,870.3z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-clock" viewBox="0 0 1000 1000"><path d="M500,10C229.8,10,10,229.8,10,500c0,270.2,219.8,490,490,490c270.2,0,490-219.8,490-490C990,229.8,770.2,10,500,10z M500,910.2c-226.2,0-410.2-184-410.2-410.2c0-226.2,184-410.2,410.2-410.2c226.2,0,410.2,184,410.2,410.2C910.2,726.1,726.2,910.2,500,910.2z M753.1,374c8.2,11.9,5.2,28.1-6.6,36.3L509.9,573.7c-4.4,3.1-9.6,4.6-14.8,4.6c-4.1,0-8.3-1-12.1-3c-8.6-4.5-14-13.4-14-23.1V202.5c0-14.4,11.7-26.1,26.1-26.1c14.4,0,26.1,11.7,26.1,26.1v300l195.6-135.1C728.7,359.2,744.9,362.1,753.1,374z"/></symbol><symbol id="icon-calendar" viewBox="0 0 1000 1000"><path d="M920,500v420H80V500H920 M990,430H10v490c0,38.7,31.3,70,70,70h840c38.7,0,70-31.3,70-70V430L990,430z"/><path d="M850,80v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80H360v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80C72.8,80,10,142.7,10,220v140h980V220C990,142.7,927.2,80,850,80z"/><path d="M255,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C290,25.8,274.3,10,255,10z"/><path d="M745,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C780,25.8,764.3,10,745,10z"/></symbol><symbol id="icon-github" viewBox="0 0 12 14"><path d="M6 1q1.633 0 3.012 0.805t2.184 2.184 0.805 3.012q0 1.961-1.145 3.527t-2.957 2.168q-0.211 0.039-0.312-0.055t-0.102-0.234q0-0.023 0.004-0.598t0.004-1.051q0-0.758-0.406-1.109 0.445-0.047 0.801-0.141t0.734-0.305 0.633-0.52 0.414-0.82 0.16-1.176q0-0.93-0.617-1.609 0.289-0.711-0.062-1.594-0.219-0.070-0.633 0.086t-0.719 0.344l-0.297 0.187q-0.727-0.203-1.5-0.203t-1.5 0.203q-0.125-0.086-0.332-0.211t-0.652-0.301-0.664-0.105q-0.352 0.883-0.062 1.594-0.617 0.68-0.617 1.609 0 0.664 0.16 1.172t0.41 0.82 0.629 0.523 0.734 0.305 0.801 0.141q-0.305 0.281-0.383 0.805-0.164 0.078-0.352 0.117t-0.445 0.039-0.512-0.168-0.434-0.488q-0.148-0.25-0.379-0.406t-0.387-0.187l-0.156-0.023q-0.164 0-0.227 0.035t-0.039 0.090 0.070 0.109 0.102 0.094l0.055 0.039q0.172 0.078 0.34 0.297t0.246 0.398l0.078 0.18q0.102 0.297 0.344 0.48t0.523 0.234 0.543 0.055 0.434-0.027l0.18-0.031q0 0.297 0.004 0.691t0.004 0.426q0 0.141-0.102 0.234t-0.312 0.055q-1.812-0.602-2.957-2.168t-1.145-3.527q0-1.633 0.805-3.012t2.184-2.184 3.012-0.805zM2.273 9.617q0.023-0.055-0.055-0.094-0.078-0.023-0.102 0.016-0.023 0.055 0.055 0.094 0.070 0.047 0.102-0.016zM2.516 9.883q0.055-0.039-0.016-0.125-0.078-0.070-0.125-0.023-0.055 0.039 0.016 0.125 0.078 0.078 0.125 0.023zM2.75 10.234q0.070-0.055 0-0.148-0.062-0.102-0.133-0.047-0.070 0.039 0 0.141t0.133 0.055zM3.078 10.562q0.062-0.062-0.031-0.148-0.094-0.094-0.156-0.023-0.070 0.062 0.031 0.148 0.094 0.094 0.156 0.023zM3.523 10.758q0.023-0.086-0.102-0.125-0.117-0.031-0.148 0.055t0.102 0.117q0.117 0.047 0.148-0.047zM4.016 10.797q0-0.102-0.133-0.086-0.125 0-0.125 0.086 0 0.102 0.133 0.086 0.125 0 0.125-0.086zM4.469 10.719q-0.016-0.086-0.141-0.070-0.125 0.023-0.109 0.117t0.141 0.062 0.109-0.109z"></path></symbol><symbol id="icon-medium" viewBox="0 0 1000 1000"><path d="M336.5,240.2v641.5c0,9.1-2.3,16.9-6.8,23.2s-11.2,9.6-20,9.6c-6.2,0-12.2-1.5-18-4.4L37.3,782.7c-7.7-3.6-14.1-9.8-19.4-18.3S10,747.4,10,739V115.5c0-7.3,1.8-13.5,5.5-18.6c3.6-5.1,8.9-7.7,15.9-7.7c5.1,0,13.1,2.7,24.1,8.2l279.5,140C335.9,238.6,336.5,239.5,336.5,240.2L336.5,240.2z M371.5,295.5l292,473.6l-292-145.5V295.5z M990,305.3v576.4c0,9.1-2.6,16.5-7.7,22.1c-5.1,5.7-12,8.5-20.8,8.5s-17.3-2.4-25.7-7.1L694.7,784.9L990,305.3z M988.4,239.7c0,1.1-46.8,77.6-140.3,229.4C754.6,621,699.8,709.8,683.8,735.7L470.5,389l177.2-288.2c6.2-10.2,15.7-15.3,28.4-15.3c5.1,0,9.8,1.1,14.2,3.3l295.9,147.7C987.6,237.1,988.4,238.2,988.4,239.7L988.4,239.7z"/></symbol><symbol id="icon-instagram" viewBox="0 0 489.84 489.84"><path d="M249.62,50.46c65.4,0,73.14.25,99,1.43C372.47,53,385.44,57,394.07,60.32a75.88,75.88,0,0,1,28.16,18.32,75.88,75.88,0,0,1,18.32,28.16c3.35,8.63,7.34,21.6,8.43,45.48,1.18,25.83,1.43,33.57,1.43,99s-0.25,73.14-1.43,99c-1.09,23.88-5.08,36.85-8.43,45.48a81.11,81.11,0,0,1-46.48,46.48c-8.63,3.35-21.6,7.34-45.48,8.43-25.82,1.18-33.57,1.43-99,1.43s-73.15-.25-99-1.43c-23.88-1.09-36.85-5.08-45.48-8.43A75.88,75.88,0,0,1,77,423.86,75.88,75.88,0,0,1,58.69,395.7c-3.35-8.63-7.34-21.6-8.43-45.48-1.18-25.83-1.43-33.57-1.43-99s0.25-73.14,1.43-99c1.09-23.88,5.08-36.85,8.43-45.48A75.88,75.88,0,0,1,77,78.64a75.88,75.88,0,0,1,28.16-18.32c8.63-3.35,21.6-7.34,45.48-8.43,25.83-1.18,33.57-1.43,99-1.43m0-44.13c-66.52,0-74.86.28-101,1.47s-43.87,5.33-59.45,11.38A120.06,120.06,0,0,0,45.81,47.44,120.06,120.06,0,0,0,17.56,90.82C11.5,106.4,7.36,124.2,6.17,150.27s-1.47,34.46-1.47,101,0.28,74.86,1.47,101,5.33,43.87,11.38,59.45a120.06,120.06,0,0,0,28.25,43.38,120.06,120.06,0,0,0,43.38,28.25c15.58,6.05,33.38,10.19,59.45,11.38s34.46,1.47,101,1.47,74.86-.28,101-1.47,43.87-5.33,59.45-11.38a125.24,125.24,0,0,0,71.63-71.63c6.05-15.58,10.19-33.38,11.38-59.45s1.47-34.46,1.47-101-0.28-74.86-1.47-101-5.33-43.87-11.38-59.45a120.06,120.06,0,0,0-28.25-43.38,120.06,120.06,0,0,0-43.38-28.25C394.47,13.13,376.67,9,350.6,7.8s-34.46-1.47-101-1.47h0Z" transform="translate(-4.7 -6.33)" /><path d="M249.62,125.48A125.77,125.77,0,1,0,375.39,251.25,125.77,125.77,0,0,0,249.62,125.48Zm0,207.41a81.64,81.64,0,1,1,81.64-81.64A81.64,81.64,0,0,1,249.62,332.89Z" transform="translate(-4.7 -6.33)"/><circle cx="375.66" cy="114.18" r="29.39" /></symbol><symbol id="icon-linkedin" viewBox="0 0 12 14"><path d="M2.727 4.883v7.742h-2.578v-7.742h2.578zM2.891 2.492q0.008 0.57-0.395 0.953t-1.059 0.383h-0.016q-0.641 0-1.031-0.383t-0.391-0.953q0-0.578 0.402-0.957t1.051-0.379 1.039 0.379 0.398 0.957zM12 8.187v4.437h-2.57v-4.141q0-0.82-0.316-1.285t-0.988-0.465q-0.492 0-0.824 0.27t-0.496 0.668q-0.086 0.234-0.086 0.633v4.32h-2.57q0.016-3.117 0.016-5.055t-0.008-2.313l-0.008-0.375h2.57v1.125h-0.016q0.156-0.25 0.32-0.438t0.441-0.406 0.68-0.34 0.895-0.121q1.336 0 2.148 0.887t0.813 2.598z"></path></symbol><symbol id="icon-heart" viewBox="0 0 34 30"><path d="M17,29.7 L16.4,29.2 C3.5,18.7 0,15 0,9 C0,4 4,0 9,0 C13.1,0 15.4,2.3 17,4.1 C18.6,2.3 20.9,0 25,0 C30,0 34,4 34,9 C34,15 30.5,18.7 17.6,29.2 L17,29.7 Z M9,2 C5.1,2 2,5.1 2,9 C2,14.1 5.2,17.5 17,27.1 C28.8,17.5 32,14.1 32,9 C32,5.1 28.9,2 25,2 C21.5,2 19.6,4.1 18.1,5.8 L17,7.1 L15.9,5.8 C14.4,4.1 12.5,2 9,2 Z" id="Shape"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 25.452 25.452"><path d="M4.471,24.929v-2.004l12.409-9.788c0.122-0.101,0.195-0.251,0.195-0.411c0-0.156-0.073-0.31-0.195-0.409L4.471,2.526V0.522c0-0.2,0.115-0.384,0.293-0.469c0.18-0.087,0.396-0.066,0.552,0.061l15.47,12.202c0.123,0.1,0.195,0.253,0.195,0.409c0,0.16-0.072,0.311-0.195,0.411L5.316,25.34c-0.155,0.125-0.372,0.147-0.552,0.061C4.586,25.315,4.471,25.13,4.471,24.929z"/></symbol><symbol id="icon-star" viewBox="0 0 48 48"><path fill="currentColor" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"/><path fill="#ffffff" d="M24,11l3.898,7.898l8.703,1.301l-6.301,6.102l1.5,8.699L24,30.898L16.199,35l1.5-8.699l-6.301-6.102  l8.703-1.301L24,11z"/></symbol><symbol id="icon-read" viewBox="0 0 32 32"><path fill="currentColor" d="M29,4H3C1.343,4,0,5.343,0,7v18c0,1.657,1.343,3,3,3h10c0,0.552,0.448,1,1,1h4c0.552,0,1-0.448,1-1h10  c1.657,0,3-1.343,3-3V7C32,5.343,30.657,4,29,4z M29,5v20H18.708c-0.618,0-1.236,0.146-1.789,0.422l-0.419,0.21V5H29z M15.5,5  v20.632l-0.419-0.21C14.528,25.146,13.91,25,13.292,25H3V5H15.5z M31,25c0,1.103-0.897,2-2,2H18v1h-4v-1H3c-1.103,0-2-0.897-2-2V7  c0-0.737,0.405-1.375,1-1.722V25c0,0.552,0.448,1,1,1h10.292c0.466,0,0.925,0.108,1.342,0.317l0.919,0.46  c0.141,0.07,0.294,0.106,0.447,0.106c0.153,0,0.306-0.035,0.447-0.106l0.919-0.46C17.783,26.108,18.242,26,18.708,26H29  c0.552,0,1-0.448,1-1V5.278C30.595,5.625,31,6.263,31,7V25z M6,12.5C6,12.224,6.224,12,6.5,12h5c0.276,0,0.5,0.224,0.5,0.5  S11.776,13,11.5,13h-5C6.224,13,6,12.776,6,12.5z M6,14.5C6,14.224,6.224,14,6.5,14h5c0.276,0,0.5,0.224,0.5,0.5S11.776,15,11.5,15  h-5C6.224,15,6,14.776,6,14.5z M6,16.5C6,16.224,6.224,16,6.5,16h5c0.276,0,0.5,0.224,0.5,0.5S11.776,17,11.5,17h-5  C6.224,17,6,16.776,6,16.5z M20,12.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,13,25.5,13h-5  C20.224,13,20,12.776,20,12.5z M20,14.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,15,25.5,15h-5  C20.224,15,20,14.776,20,14.5z M20,16.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,17,25.5,17h-5  C20.224,17,20,16.776,20,16.5z"></path></symbol></defs></svg>

        <header class="bar-header">
    <a id="menu" role="button">
        <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    </a>
    <h1 class="logo">
        <a href="/">
            
                Hoonology <span class="version"></span>
            
        </a>
    </h1>
    <a id="search" class="dosearch" role="button">
        <svg class="icon-search"><use xlink:href="#icon-search"></use></svg>
    </a>
    
</header>

<div id="mask" class="overlay"></div>

<aside class="sidebar" id="sidebar">
    <nav id="navigation">
      <h2>Menu</h2>
      <ul>
  
    
      <li>
        <a href="http://localhost:4000/">Home</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/about">About</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/blog">Github Blog</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/yaml">YAML</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/docker">Docker</a>
      </li>
    
  
    
  
</ul>

    </nav>
</aside>

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>



        <section class="post two-columns">
            <article role="article" class="post-content">
                <p class="post-info">
                    
                        <svg class="icon-calendar" id="date"><use xlink:href="#icon-calendar"></use></svg>
                        <time class="date" datetime="2023-04-18T12:30:00+09:00">
                            


April 18, 2023

                        </time>
                    
                    <svg id="clock" class="icon-clock"><use xlink:href="#icon-clock"></use></svg>
                    <span>7 min to read</span>
                </p>
                <h1 class="post-title">(Sprint) 도메인 연결과 CDN 및 HTTPS적용</h1>
                <p class="post-subtitle">도메인 연결과 CDN 및 HTTPS적용</p>

                
                    <img src="https://res.cloudinary.com/dvqcvocet/image/upload/v1681432465/dev-jeans_%E1%84%87%E1%85%A9%E1%86%A8%E1%84%89%E1%85%A1%E1%84%87%E1%85%A9%E1%86%AB_y5n0eh.png" alt="Featured image" class="post-cover">
                

                <!-- Pagination links -->



                <!-- Add your table of contents here -->


                <h1 id="도메인-연결과-cdn-및-https-적용">도메인 연결과 CDN 및 HTTPS 적용</h1>
<h2 id="prerequisite">Prerequisite</h2>
<ul>
  <li>Sprint1인 HTTP 배포를 완료해야 합니다.</li>
  <li>HTTPS에 대한 이해와 학습이 선행되어야 합니다.</li>
  <li>AWS Route53을 통해 구매한 도메인이 있어야 합니다.</li>
</ul>

<h2 id="bare-minimum-requirements">Bare Minimum Requirements</h2>
<ul>
  <li>HTTPS로 웹 애플리케이션을 배포할 수 있어야 합니다.</li>
  <li>CloudFront, Certificate Manager, Elastic Load Balancer, Route53 등의 서비스에 대해서 이해합니다.</li>
  <li>모든 테스트를 통과하고, 제출해야 합니다.</li>
</ul>

<h2 id="getting-started">Getting Started</h2>
<ul>
  <li>HTTPS를 적용하기 위해서는 어떤 아키텍처와 어떤 AWS 서비스가 필요한지 구상합니다.
    <ul>
      <li>구상한 내용을 draw.io 등을 이용해 다이어그램으로 그리고, 해당 이미지파일을 S3에 httpsdiagram 이라는 이름으로 업로드합니다.</li>
      <li>이때 해당 객체에 대한 퍼블릭 액세스를 허용해야 테스트를 통과할 수 있습니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">.env</code>파일에 HTTPS 적용을 위한 환경설정으로 적절하게 작성합니다.</li>
  <li><code class="language-plaintext highlighter-rouge">npm run test2</code> 명령을 사용해 테스트가 통과하는지 확인합니다.</li>
  <li>실제로 웹 애플리케이션이 브라우저 상에서 HTTPS 프로토콜로 작동하는지 확인합니다.</li>
</ul>

<h2 id="0-보안그룹security-group">0. 보안그룹(Security Group)</h2>
<h4 id="1-보안그룹은-aws에서-임대한-인스턴스의-가상-방화벽이다">1. 보안그룹은 AWS에서 임대한 인스턴스의 <strong>가상 방화벽</strong>이다.</h4>
<h4 id="2-인바운드-인스턴스로-들어가는-트래픽-와-아웃바운드-인스턴스에서-나가는-트래픽-에-대한-규칙을-설정할-수-있다">2. 인바운드( 인스턴스로 들어가는 트래픽 )와 아웃바운드( 인스턴스에서 나가는 트래픽 )에 대한 규칙을 설정할 수 있다.</h4>

<p><img src="/assets/img/AWS/SecurityGroup.png" alt="보안그룹" /></p>
<p align="center"> [사진] 인바운드 규칙</p>

<p><img src="/assets/img/AWS/outbound.png" alt="outbound" /></p>
<p align="center"> [사진] 아웃바운드 규칙</p>

<h3 id="보안그룹-설정">보안그룹 설정</h3>
<p>인스턴스 탭의 우측에서 해당 인스턴스가 어떤 보안그룹에 속해있는지 확인할 수 있다.
<img src="/assets/img/AWS/WhichGroup.png" alt="Which" /></p>

<h4 id="인바운드-규칙-설정">인바운드 규칙 설정</h4>
<p><img src="/assets/img/AWS/InboundRule.png" alt="inbound" />
<img src="/assets/img/AWS/InboundRule2.png" alt="inbound2" /></p>

<h2 id="1-certificate-manager를-통한-도메인-인증서-발급">1. Certificate Manager를 통한 도메인 인증서 발급</h2>
<ul>
  <li>구매한 도메인을 기준으로 인증서를 발급 받습니다.
    <ul>
      <li>도메인 구매 : <code class="language-plaintext highlighter-rouge">Route 53</code>에서 구매를해준다.
        <ul>
          <li>도메인 등록 클릭<br />
( <code class="language-plaintext highlighter-rouge">hoonology.click</code>으로 등록했다.)</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><img src="/assets/img/AWS/%EB%8F%84%EB%A9%94%EC%9D%B81.png" alt="도메인구매1" />
    <code class="language-plaintext highlighter-rouge">Route53</code>에서 도메인 구매 후 도메인 등록 대기 
<img src="/assets/img/AWS/%EB%8F%84%EB%A9%94%EC%9D%B82.png" alt="도메인구매2" /></p>

<blockquote>
  <p>S3의 이름이 <code class="language-plaintext highlighter-rouge">hoonology.com</code>으로 되어 있어서, <code class="language-plaintext highlighter-rouge">hoonology.click</code>으로 재설정한 뒤 인증 요청을 보냈다.</p>
</blockquote>

<ul>
  <li>S3를 만들 때, 정책 아래와 같이 수정하는거 잊지 않도록</li>
</ul>

<p><img src="/assets/img/AWS/%EB%B2%84%EC%BA%A3%EC%A0%95%EC%B1%85.png" alt="bucket" /></p>

<ul>
  <li>도메인 등록 성공(시간이 좀 걸린다.)</li>
</ul>

<p><img src="/assets/img/AWS/success.png" alt="success" /></p>

<ul>
  <li>Route53 등록 성공 확인 후</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">CertificateManager</code>에 Route53에 등록한 도메인을 등록해준다.</p>

<ul>
  <li>https는 빼줘야함</li>
</ul>

<p><img src="/assets/img/AWS/certificateManager.png" alt="certificateManager" /></p>

<ul>
  <li>30분 ~ 1시간 정도 기다린다.</li>
</ul>

<p><img src="/assets/img/AWS/Waitting.png" alt="wait" /></p>

<p><a href="https://docs.aws.amazon.com/ko_kr/ko_kr/elasticloadbalancing/latest/application/create-https-listener.html">로드밸런서 Reference</a></p>
<ul>
  <li>HTTPS 수신기는 클라이언트와 서버 간의 보안 HTTPS 트래픽을 처리하는 데 사용됩니다. AWS Management Console을 사용하여 HTTPS 리스너를 생성하려면 사용자의 AWS 계정에 이미 생성된 애플리케이션 로드 밸런서가 있어야 합니다.</li>
</ul>

<p>사용자에게 애플리케이션 로드 밸런서가 있으면 콘솔에서 “리스너” 탭으로 이동하여 “만들기”를 클릭할 수 있습니다. 그런 다음 HTTPS 프로토콜을 선택하고 SSL 인증서를 제공하라는 메시지가 표시됩니다.</p>

<p>프로토콜 및 인증서를 선택한 후 사용자는 포트 및 대상 그룹과 같은 수신기 설정을 구성할 수 있습니다. 설정이 구성되면 HTTPS 리스너가 생성되고 사용자 애플리케이션의 보안 트래픽을 처리할 준비가 됩니다.</p>

<h2 id="2-route53-레코드-등록">2. Route53 레코드 등록</h2>
<ul>
  <li>백엔드와 프론트엔드의 별칭 레코드를 Route53 호스팅 영역에 생성합니다.</li>
  <li>
    <p>백엔드는 <a href="https://api.yourdomain.click">https://api.yourdomain.click</a>으로 접속 시, 로드밸런서로 연결되어야 하며, 프론트엔드는 <a href="https://www.yourdomain.click">https://www.yourdomain.click</a>으로 접속 시, <code class="language-plaintext highlighter-rouge">Cloudfront</code>로 연결되어야 합니다.</p>
  </li>
  <li>인증서는 <code class="language-plaintext highlighter-rouge">프론트엔드 Cloudfront 사용 리전</code>인 <code class="language-plaintext highlighter-rouge">us-east-1</code>과<br />
<code class="language-plaintext highlighter-rouge">백엔드 Load Balancer 사용리전</code>인 <code class="language-plaintext highlighter-rouge">ap-northeast-2</code>에서 발급 받아야 합니다.
<img src="/assets/img/AWS/%EB%A6%AC%EC%A0%84%EB%B3%84.png" alt="리전별" />
    <p align="center">[사진] 리전 두개를 선택한 뒤 인증서 요청을 해야한다. </p>
  </li>
</ul>

<p><img src="/assets/img/AWS/%EB%A6%AC%EC%A0%84%EB%B3%842.png" alt="리전별2" /></p>
<p align="center">[사진] 정규화된 도메인 이름에 와일드카드 붙이기 </p>

<p><img src="/assets/img/AWS/%EB%A6%AC%EC%A0%84%EB%B3%843.png" alt="리전별3" /></p>
<p align="center">[사진] 리전 버지니아 북부에서 인증서 발급 완료(프론트엔드 Cloudfront 사용) </p>

<p><img src="/assets/img/AWS/%EB%A6%AC%EC%A0%84%EB%B3%844.png" alt="리전별4" /></p>

<p align="center">[사진] 리전 서울에서 인증서 발급 완료(Load Balancer 사용) </p>

<ul>
  <li>발급 시, DNS 검증 가이드로 <a href="https://docs.aws.amazon.com/ko_kr/acm/latest/userguide/dns-validation.html">레퍼런스</a>를 참고하세요.
    <blockquote>
      <p>도메인 이름 시스템(DNS)은 네트워크에 연결되는 리소스를 위한 디렉터리 서비스입니다. DNS 공급자는 도메인을 정의하는 레코드가 포함된 데이터베이스를 유지 관리합니다. DNS 검증을 선택하면 ACM은 이 데이터베이스에 추가해야 하는 하나 이상의 CNAME 레코드를 제공합니다. 이 레코드에는 사용자가 도메인을 통제함을 증명하는 역할을 하는 고유한 키-값 페어가 포함되어 있습니다.</p>
    </blockquote>
  </li>
  <li>이후에 DNS 공급자로 Route53을 이용합니다. Route53에 레코드 생성과정을 반드시 거쳐야합니다.</li>
  <li>인증까지 최소 30분의 시간이 소요될 수 있습니다.</li>
</ul>

<h2 id="3-백엔드-https-적용">3. 백엔드 HTTPS 적용</h2>
<ul>
  <li>애플리케이션 로드밸런서(Application Load Balancer)를 생성합니다.</li>
</ul>

<p><img src="/assets/img/aws/%EB%A1%9C%EB%93%9C%EB%B0%B8%EB%9F%B0%EC%84%9C.png" alt="로드밸런서" /></p>

<p align="center">[사진] Create load balancer 클릭</p>

<ul>
  <li>우리는 HTTP와 HTTPS를 다룰 것이기 때문에, 첫 번째를 누른다.
<img src="/assets/img/AWS/ApplicationLoadBalancer.png" alt="create" /></li>
</ul>
<p align="center">[사진] 로드밸런서 타입 - Application Load Balancer 선택</p>

<ul>
  <li>로드밸런서 만들기
    <ul>
      <li>로드밸런서 이름</li>
      <li>Internet-facing
<img src="/assets/img/AWS/%08Create.png" alt="create" /></li>
    </ul>
  </li>
</ul>
<p align="center">[사진] Create Application Load Balancer</p>

<ul>
  <li>Network mapping
    <ul>
      <li>VPC : default
<img src="/assets/img/AWS/%08mapping.png" alt="mapping" /></li>
    </ul>
  </li>
</ul>
<p align="center">[사진] Create Application Load Balancer</p>

<ul>
  <li>보안그룹과 Listeners and routing
    <ul>
      <li>로드밸런서는 하나 이상의 Listener가 있어야한다.</li>
      <li>로드밸런서가 받아서 분산을 시키든 무언가를 할텐데, 받는 친구도 있어야한다. 그게 리스너다.</li>
      <li><strong>‘나에게 80으로 들어오는 것을 타겟그룹으로 보내라’</strong> 라는 로직하에, 타겟 그룹이 필요하다.
<img src="/assets/img/AWS/security%20groups.png" alt="보안그룹" /></li>
    </ul>
  </li>
</ul>
<p align="center">[사진] Security groups &amp; Listeners and routing</p>

<ul>
  <li>난 타겟 그룹 설정이 안돼있어서 새로 만들어줬다.
    <ul>
      <li>Instances 를 선택한 이유 : 타겟으로 하고 싶은 것이 EC2 인스턴스 안에 돌아가는 서버이기 때문
<img src="/assets/img/AWS/%ED%83%80%EA%B2%9F%EA%B7%B8%EB%A3%B92.png" alt="타겟그룹2" /></li>
    </ul>
  </li>
</ul>
<p align="center">[사진] Create taget group</p>

<ul>
  <li>타겟그룹을 만든 뒤 토글을 눌러 선택 
<img src="/assets/img/aws/%ED%83%80%EC%BC%93%EA%B7%B8%EB%A3%B9.png" alt="타겟그룹" /></li>
</ul>
<p align="center">[사진] Listeners and routing </p>

<ul>
  <li>헬스체크</li>
</ul>

<p><img src="/assets/img/aws/%ED%97%AC%EC%8A%A4%EC%B2%B4%ED%81%AC.png" alt="헬스체크" /></p>

<p align="center">[사진] Edit health check settings </p>

<ul>
  <li>sample 로 지정된 repository에서는 200번이 아닌, 201번으로 설정해줘서 바꿔야한다.
    <ul>
      <li>Advanced health check settings 토글 클릭
<img src="/assets/img/AWS/advanced.png" alt="토글" /></li>
    </ul>
  </li>
</ul>
<p align="center">[사진] Advanced health check settings 토글 클릭 후 나오는 화면 </p>

<ul>
  <li>success code : 201로 수정(샘플 참조)
  <img src="/assets/img/AWS/advanced_201.png" alt="advanced" /></li>
</ul>
<p align="center">[사진] success code를 201로 수정 </p>

<ul>
  <li>로드밸런서 상태 확인
    <ul>
      <li>사진에는 hoonology라고 나오는데, 나중에 hoonology-rb로 변경했다.
<img src="/assets/img/AWS/%EB%A1%9C%EB%93%9C%EB%B0%B8%EB%9F%B0%EC%84%9C%EC%8A%A4.png" alt="load" /></li>
    </ul>
  </li>
  <li>Unhealthy 해결하기
    <ul>
      <li>EC2 재 연결 -&gt; 새로운 IP가 부여 -&gt; ssh 연결 시 해당 IP를 입력
<img src="/assets/img/AWS/%EC%83%88%EB%A1%9C%EC%9A%B4IP.png" alt="EC2재연결" /></li>
    </ul>
  </li>
</ul>
<p align="center">[사진] 새로 부여 받은 IP 주소 - 퍼블릭 IPv4주소 </p>

<p><img src="/assets/img/AWS/ssh%EC%97%B0%EA%B2%B0.png" alt="ssh연결" /></p>
<p align="center">[사진] 새로 부여 받은 IP주소로 할당 </p>

<p><img src="/assets/img/AWS/%EC%97%B0%EA%B2%B0%EC%99%84%EB%A3%8C.png" alt="ssh연결완료" /></p>
<p align="center">[사진] EC2 연결완료 </p>

<ul>
  <li>sample 디렉토리에 이동 후 아래 코드 실행</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>npm run start
</code></pre></div></div>
<ul>
  <li>서버 구동 확인
<img src="/assets/img/AWS/sudo.png" alt="sudo" /></li>
</ul>
<p align="center">[사진] 서버 구동 확인 </p>

<ul>
  <li>인터넷을 통해 연결해본다.</li>
</ul>

<p><img src="/assets/img/AWS/%EB%93%A4%EC%96%B4%EA%B0%80%EB%B3%B4%EA%B8%B0.png" alt="연결확인" /></p>
<p align="center">[사진] IP주소로 접속 시 Hello World 문구 확인 가능 </p>

<ul>
  <li>healthy or unhealthy ?
<img src="/assets/img/AWS/healthy.png" alt="healthy" /></li>
</ul>

<blockquote>
  <p>서버가 죽어있으면 unhealthy로 나온다. 서버를 종료하지 않고 80번 포트에서 실행이 되도록 한다.</p>
</blockquote>

<ul>
  <li>ALB의 리스너, 가용영역, 인증서를 설정합니다.</li>
  <li>대상 그룹(target group)을 등록합니다.</li>
  <li>로드밸런서 DNS 주소로 접속해, 테스트를 진행합니다.</li>
  <li>아래 레퍼런스를 참조하여, 스프린트를 진행합니다.</li>
</ul>

<h3 id="인스턴스--시작템플릿">[인스턴스] / [시작템플릿]</h3>
<p><img src="/assets/img/AWS/startTemplate.png" alt="startT" />
EC2 만드는 것 처럼 하면 된다.</p>
<ul>
  <li>키페어는 무엇이며 .. 등등</li>
</ul>

<h3 id="3-auto-scaling">3. Auto Scaling</h3>
<p><img src="/assets/img/AWS/auto.png" alt="auto" />
<img src="/assets/img/AWS/auto2.png" alt="auto2" />
가용 영역은 여러개 분산 시키는 것이 좋다. (4개 정도)<br />
한 곳에 몰려있는 것은 비추천
<img src="/assets/img/AWS/auto3.png" alt="auto3" />
로드밸런서와 오토스켈링은 따로 쓸 수 있지만, 같이 쓰면 효과가 강력하기에 같이 쓰도록 한다.
<img src="/assets/img/AWS/auto4.png" alt="auto4" />
최대 : 사용자가 늘어난다고 정의했지만 무한히 늘어나면 안되니깐, 최대 어디 까지 늘것인지 설정<br />
최소 : 트래픽이 줄어들 때 몇까지 줄어들 것인지 (최소한 몇개 까진 돌아가야한다는 것을 설정)
<img src="/assets/img/AWS/auto5.png" alt="auto5" />
대상 추적 크기 조정 정책 : 언제 스케일링을 통해서 변할(늘고 줄) 것인지 설정하는 것
<img src="/assets/img/AWS/auto6.png" alt="auto6" /></p>

<h3 id="4-프론트엔드-cdn-및-https-적용---cloudfront">4. 프론트엔드 CDN 및 HTTPS 적용 - CloudFront</h3>
<p>캐싱을 해가지고 클라이언트에게 배포를 전달해주는 것 !</p>

<p><img src="/assets/img/AWS/cloudFront2.png" alt="cloudFront" /></p>

<ul>
  <li>Origin Domain을 설정해야 합니다.
    <ul>
      <li>CloudFront 배포 생성
<img src="/assets/img/AWS/cloudfront.png" alt="cloudfront" /></li>
      <li>원본 생성
<img src="/assets/img/AWS/origin.png" alt="cloudfront" /></li>
    </ul>
  </li>
  <li>
    <p>Redirect HTTP to HTTPS
<img src="/assets/img/AWS/origin_cache.png" alt="cloudfront" /></p>
  </li>
  <li>
    <p>Certificate Manager에서 발급받은 인증서를 사용해야 합니다.</p>
  </li>
  <li>Default root object 부분에 index.html을 작성해야 합니다.</li>
  <li>대체도메인과 인증 받은 도메인의 이름이 같아야 합니다.</li>
  <li>생성된 배포의 Distribution domain name으로 접속이 되는지 확인합니다.</li>
  <li>아래 레퍼런스를 참조하여, 스프린트를 진행합니다.</li>
</ul>

<p>Reference</p>
<ul>
  <li><a href="https://docs.aws.amazon.com/ko_kr/ko_kr/elasticloadbalancing/latest/application/create-https-listener.html">Application Load Balancer용 HTTPS 리스너 생성</a></li>
  <li><a href="https://docs.aws.amazon.com/ko_kr/ko_kr/AmazonCloudFront/latest/DeveloperGuide/distribution-web-creating-console.html">CloudFront 배포 생성</a></li>
  <li><a href="https://docs.aws.amazon.com/ko_kr/ko_kr/AmazonCloudFront/latest/DeveloperGuide/distribution-web-values-specify.html">CloudFront 배포를 만들거나 업데이트할 때 지정하는 값</a></li>
</ul>

<p>&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;</p>

<h1 id="회고">회고</h1>
<h2 id="ec2-s3">EC2, S3</h2>
<p>Route53에서 도메인 주소 등록해줘야하는데, 내가 S3의 이름을 ‘.com’으로 등록했던것을 발견한 뒤 수정을 ‘.click’으로 하면서 정리해야겠다고 생각해서 정리한다.</p>
<blockquote>
  <p>S3는 정적 웹사이트를 위해 빌드를 버켓에 담기 위해 쓴다.</p>
</blockquote>

<p>와일드카드로 도메인을 인증 -&gt; 대체도메인도 마찬가지</p>

<ul>
  <li>HTTPS로 보안이 된 것을 통신하고 싶다.
    <ul>
      <li>이것이 로직의 핵심</li>
    </ul>
  </li>
  <li>
    <p>‘클라 - 서버’ : EC2로 만드는 것(VPC 안에서)</p>
  </li>
  <li>로드밸런서로 접속하는건 <code class="language-plaintext highlighter-rouge">http</code>로 , Route53으로 DNS 접속하는 것은 https로 접근한다.</li>
</ul>


                <!-- Pagination links -->


            </article>

            
                <aside class="see-also">
                    <h2>See also</h2>
                    <ul>
                        
                        
                        
                            <li>
                                <a href="/mornitoringSystem/">
                                    
                                        <img src="https://res.cloudinary.com/dvqcvocet/image/upload/v1685689813/%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%86%E1%85%A6%E1%84%90%E1%85%A6%E1%84%8B%E1%85%AE%E1%84%89%E1%85%B3_zt9ivp.png">
                                    
                                    <h3>모니터링 시스템 구축</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/AWS-%EC%84%9C%EB%B9%84%EC%8A%A4-VPC/">
                                    
                                        <img src="https://res.cloudinary.com/dvqcvocet/image/upload/v1681432465/dev-jeans_%E1%84%87%E1%85%A9%E1%86%A8%E1%84%89%E1%85%A1%E1%84%87%E1%85%A9%E1%86%AB_y5n0eh.png">
                                    
                                    <h3>AWS 서비스 - VPC</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/mornitoring-TechInterview/">
                                    
                                        <img src="https://res.cloudinary.com/dvqcvocet/image/upload/v1685689813/%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%86%E1%85%A6%E1%84%90%E1%85%A6%E1%84%8B%E1%85%AE%E1%84%89%E1%85%B3_zt9ivp.png">
                                    
                                    <h3>서비스 모니터링 기술면접</h3>
                                </a>
                            </li>
                        
                    </ul>
                </aside>
            

        </section>

        <!-- Add time bar only for pages without pagination -->
        
            <div class="time-bar" data-minutes="7">
    <span class="time-completed"></span>
    <span class="time-remaining"></span>
    <div class="bar">
        <span class="completed" style="width:0%;"></span>
        <span class="remaining" style="width:100%;"></span>
    </div>
</div>

            <div class="recommendation">
    <div class="message">
        <strong>Why don't you read something next?</strong>
        <div>
            <button>
                <svg><use xlink:href="#icon-arrow-right"></use></svg>
                <span>Go back to top</span>
            </button>
        </div>
    </div>
    
    <a href="/CI_CD_%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8/" class="post-preview">
        <div class="image">
            
                <img src="https://res.cloudinary.com/dvqcvocet/image/upload/v1681954803/eoe0iiqoeiq9ghldrltc.png">
            
        </div>
        <h3 class="title">CI/CD 파이프라인_지속적 배포</h3>
    </a>
</div>

        

        <!-- Show modal if the post is the last one -->
        

        <!-- Show modal before user leaves the page -->
        

        <!-- Add your newsletter subscription form here -->

        <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;(Sprint) 도메인 연결과 CDN 및 HTTPS적용&quot;%20http://localhost:4000/AWS-%EC%84%9C%EB%B9%84%EC%8A%A4-Sprint/%20via%20&#64;&hashtags=AWS,cloud,CloudFront,Route53,Sprint"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/AWS-%EC%84%9C%EB%B9%84%EC%8A%A4-Sprint/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
</section>

        


        

<section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'hoonology';
        var disqus_title = '';
        var disqus_url = '/AWS-%EC%84%9C%EB%B9%84%EC%8A%A4-Sprint/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>



        <footer>
    <p>
      
        <a href="https://github.com/hoonology" title="Github">
          <svg><use xlink:href="#icon-github"></use></svg>
        </a>
      
      
      
      
      
        <a href="https://www.instagram.com/ho.o_ny" title="Instagram">
          <svg><use xlink:href="#icon-instagram"></use></svg>
        </a>
      
      
    </p>

    <ul>
  
    
      <li>
        <a href="http://localhost:4000/">Home</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/about">About</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/blog">Github Blog</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/yaml">YAML</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/docker">Docker</a>
      </li>
    
  
    
  
</ul>


    <!-- <p>
      <span>Jekflix</span> was made with <svg class="love"><use xlink:href="#icon-heart"></use></svg> by <a href="https://rossener.com" target="_blank" class="creator">Thiago Rossener</a>
    </p> -->
</footer>









<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "Hoonology",
  "description": "Hoonology changes whole world.",
  "url": "http://localhost:4000/",
  "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:4000/assets/img/icons/mediumtile.png",
      "width": "600",
      "height": "315"
  },
  "sameAs": [
    "https://github.com/hoonology","https://www.instagram.com/ho.o_ny"
  ]
}
</script>

<!-- Include the script that allows Netlify CMS login -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<!-- Include the website scripts -->
<script src="/assets/js/scripts.min.js"></script>

<!-- Include Google Analytics script -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JJ0MLGN5R6"></script>
<script>
  var host = window.location.hostname;
  if (host != 'localhost') {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-JJ0MLGN5R6');
  }
</script>
  


<!-- Include extra scripts -->



        

        
        
        
        
        
        
        
        
        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "BlogPosting",
            "name": "(Sprint) 도메인 연결과 CDN 및 HTTPS적용",
            "headline": "도메인 연결과 CDN 및 HTTPS적용",
            "description": "(Sprint) 도메인 연결과 CDN 및 HTTPS적용",
            "image": "https://res.cloudinary.com/dvqcvocet/image/upload/v1681432465/dev-jeans_%E1%84%87%E1%85%A9%E1%86%A8%E1%84%89%E1%85%A1%E1%84%87%E1%85%A9%E1%86%AB_y5n0eh.png",
            "url": "http://localhost:4000/AWS-%EC%84%9C%EB%B9%84%EC%8A%A4-Sprint/",
            "articleBody": "도메인 연결과 CDN 및 HTTPS 적용
Prerequisite

  Sprint1인 HTTP 배포를 완료해야 합니다.
  HTTPS에 대한 이해와 학습이 선행되어야 합니다.
  AWS Route53을 통해 구매한 도메인이 있어야 합니다.


Bare Minimum Requirements

  HTTPS로 웹 애플리케이션을 배포할 수 있어야 합니다.
  CloudFront, Certificate Manager, Elastic Load Balancer, Route53 등의 서비스에 대해서 이해합니다.
  모든 테스트를 통과하고, 제출해야 합니다.


Getting Started

  HTTPS를 적용하기 위해서는 어떤 아키텍처와 어떤 AWS 서비스가 필요한지 구상합니다.
    
      구상한 내용을 draw.io 등을 이용해 다이어그램으로 그리고, 해당 이미지파일을 S3에 httpsdiagram 이라는 이름으로 업로드합니다.
      이때 해당 객체에 대한 퍼블릭 액세스를 허용해야 테스트를 통과할 수 있습니다.
    
  
  .env파일에 HTTPS 적용을 위한 환경설정으로 적절하게 작성합니다.
  npm run test2 명령을 사용해 테스트가 통과하는지 확인합니다.
  실제로 웹 애플리케이션이 브라우저 상에서 HTTPS 프로토콜로 작동하는지 확인합니다.


0. 보안그룹(Security Group)
1. 보안그룹은 AWS에서 임대한 인스턴스의 가상 방화벽이다.
2. 인바운드( 인스턴스로 들어가는 트래픽 )와 아웃바운드( 인스턴스에서 나가는 트래픽 )에 대한 규칙을 설정할 수 있다.


 [사진] 인바운드 규칙


 [사진] 아웃바운드 규칙

보안그룹 설정
인스턴스 탭의 우측에서 해당 인스턴스가 어떤 보안그룹에 속해있는지 확인할 수 있다.


인바운드 규칙 설정



1. Certificate Manager를 통한 도메인 인증서 발급

  구매한 도메인을 기준으로 인증서를 발급 받습니다.
    
      도메인 구매 : Route 53에서 구매를해준다.
        
          도메인 등록 클릭
( hoonology.click으로 등록했다.)
        
      
    
  



    Route53에서 도메인 구매 후 도메인 등록 대기 



  S3의 이름이 hoonology.com으로 되어 있어서, hoonology.click으로 재설정한 뒤 인증 요청을 보냈다.



  S3를 만들 때, 정책 아래와 같이 수정하는거 잊지 않도록





  도메인 등록 성공(시간이 좀 걸린다.)





  Route53 등록 성공 확인 후


CertificateManager에 Route53에 등록한 도메인을 등록해준다.


  https는 빼줘야함





  30분 ~ 1시간 정도 기다린다.




로드밸런서 Reference

  HTTPS 수신기는 클라이언트와 서버 간의 보안 HTTPS 트래픽을 처리하는 데 사용됩니다. AWS Management Console을 사용하여 HTTPS 리스너를 생성하려면 사용자의 AWS 계정에 이미 생성된 애플리케이션 로드 밸런서가 있어야 합니다.


사용자에게 애플리케이션 로드 밸런서가 있으면 콘솔에서 “리스너” 탭으로 이동하여 “만들기”를 클릭할 수 있습니다. 그런 다음 HTTPS 프로토콜을 선택하고 SSL 인증서를 제공하라는 메시지가 표시됩니다.

프로토콜 및 인증서를 선택한 후 사용자는 포트 및 대상 그룹과 같은 수신기 설정을 구성할 수 있습니다. 설정이 구성되면 HTTPS 리스너가 생성되고 사용자 애플리케이션의 보안 트래픽을 처리할 준비가 됩니다.

2. Route53 레코드 등록

  백엔드와 프론트엔드의 별칭 레코드를 Route53 호스팅 영역에 생성합니다.
  
    백엔드는 https://api.yourdomain.click으로 접속 시, 로드밸런서로 연결되어야 하며, 프론트엔드는 https://www.yourdomain.click으로 접속 시, Cloudfront로 연결되어야 합니다.
  
  인증서는 프론트엔드 Cloudfront 사용 리전인 us-east-1과
백엔드 Load Balancer 사용리전인 ap-northeast-2에서 발급 받아야 합니다.

    [사진] 리전 두개를 선택한 뒤 인증서 요청을 해야한다. 
  



[사진] 정규화된 도메인 이름에 와일드카드 붙이기 


[사진] 리전 버지니아 북부에서 인증서 발급 완료(프론트엔드 Cloudfront 사용) 



[사진] 리전 서울에서 인증서 발급 완료(Load Balancer 사용) 


  발급 시, DNS 검증 가이드로 레퍼런스를 참고하세요.
    
      도메인 이름 시스템(DNS)은 네트워크에 연결되는 리소스를 위한 디렉터리 서비스입니다. DNS 공급자는 도메인을 정의하는 레코드가 포함된 데이터베이스를 유지 관리합니다. DNS 검증을 선택하면 ACM은 이 데이터베이스에 추가해야 하는 하나 이상의 CNAME 레코드를 제공합니다. 이 레코드에는 사용자가 도메인을 통제함을 증명하는 역할을 하는 고유한 키-값 페어가 포함되어 있습니다.
    
  
  이후에 DNS 공급자로 Route53을 이용합니다. Route53에 레코드 생성과정을 반드시 거쳐야합니다.
  인증까지 최소 30분의 시간이 소요될 수 있습니다.


3. 백엔드 HTTPS 적용

  애플리케이션 로드밸런서(Application Load Balancer)를 생성합니다.




[사진] Create load balancer 클릭


  우리는 HTTP와 HTTPS를 다룰 것이기 때문에, 첫 번째를 누른다.


[사진] 로드밸런서 타입 - Application Load Balancer 선택


  로드밸런서 만들기
    
      로드밸런서 이름
      Internet-facing

    
  

[사진] Create Application Load Balancer


  Network mapping
    
      VPC : default

    
  

[사진] Create Application Load Balancer


  보안그룹과 Listeners and routing
    
      로드밸런서는 하나 이상의 Listener가 있어야한다.
      로드밸런서가 받아서 분산을 시키든 무언가를 할텐데, 받는 친구도 있어야한다. 그게 리스너다.
      ‘나에게 80으로 들어오는 것을 타겟그룹으로 보내라’ 라는 로직하에, 타겟 그룹이 필요하다.

    
  

[사진] Security groups &amp;amp; Listeners and routing


  난 타겟 그룹 설정이 안돼있어서 새로 만들어줬다.
    
      Instances 를 선택한 이유 : 타겟으로 하고 싶은 것이 EC2 인스턴스 안에 돌아가는 서버이기 때문

    
  

[사진] Create taget group


  타겟그룹을 만든 뒤 토글을 눌러 선택 


[사진] Listeners and routing 


  헬스체크




[사진] Edit health check settings 


  sample 로 지정된 repository에서는 200번이 아닌, 201번으로 설정해줘서 바꿔야한다.
    
      Advanced health check settings 토글 클릭

    
  

[사진] Advanced health check settings 토글 클릭 후 나오는 화면 


  success code : 201로 수정(샘플 참조)
  

[사진] success code를 201로 수정 


  로드밸런서 상태 확인
    
      사진에는 hoonology라고 나오는데, 나중에 hoonology-rb로 변경했다.

    
  
  Unhealthy 해결하기
    
      EC2 재 연결 -&amp;gt; 새로운 IP가 부여 -&amp;gt; ssh 연결 시 해당 IP를 입력

    
  

[사진] 새로 부여 받은 IP 주소 - 퍼블릭 IPv4주소 


[사진] 새로 부여 받은 IP주소로 할당 


[사진] EC2 연결완료 


  sample 디렉토리에 이동 후 아래 코드 실행


sudo npm run start


  서버 구동 확인


[사진] 서버 구동 확인 


  인터넷을 통해 연결해본다.



[사진] IP주소로 접속 시 Hello World 문구 확인 가능 


  healthy or unhealthy ?




  서버가 죽어있으면 unhealthy로 나온다. 서버를 종료하지 않고 80번 포트에서 실행이 되도록 한다.



  ALB의 리스너, 가용영역, 인증서를 설정합니다.
  대상 그룹(target group)을 등록합니다.
  로드밸런서 DNS 주소로 접속해, 테스트를 진행합니다.
  아래 레퍼런스를 참조하여, 스프린트를 진행합니다.


[인스턴스] / [시작템플릿]

EC2 만드는 것 처럼 하면 된다.

  키페어는 무엇이며 .. 등등


3. Auto Scaling


가용 영역은 여러개 분산 시키는 것이 좋다. (4개 정도)
한 곳에 몰려있는 것은 비추천

로드밸런서와 오토스켈링은 따로 쓸 수 있지만, 같이 쓰면 효과가 강력하기에 같이 쓰도록 한다.

최대 : 사용자가 늘어난다고 정의했지만 무한히 늘어나면 안되니깐, 최대 어디 까지 늘것인지 설정
최소 : 트래픽이 줄어들 때 몇까지 줄어들 것인지 (최소한 몇개 까진 돌아가야한다는 것을 설정)

대상 추적 크기 조정 정책 : 언제 스케일링을 통해서 변할(늘고 줄) 것인지 설정하는 것


4. 프론트엔드 CDN 및 HTTPS 적용 - CloudFront
캐싱을 해가지고 클라이언트에게 배포를 전달해주는 것 !




  Origin Domain을 설정해야 합니다.
    
      CloudFront 배포 생성

      원본 생성

    
  
  
    Redirect HTTP to HTTPS

  
  
    Certificate Manager에서 발급받은 인증서를 사용해야 합니다.
  
  Default root object 부분에 index.html을 작성해야 합니다.
  대체도메인과 인증 받은 도메인의 이름이 같아야 합니다.
  생성된 배포의 Distribution domain name으로 접속이 되는지 확인합니다.
  아래 레퍼런스를 참조하여, 스프린트를 진행합니다.


Reference

  Application Load Balancer용 HTTPS 리스너 생성
  CloudFront 배포 생성
  CloudFront 배포를 만들거나 업데이트할 때 지정하는 값


&amp;lt;/br&amp;gt;
&amp;lt;/br&amp;gt;
&amp;lt;/br&amp;gt;

회고
EC2, S3
Route53에서 도메인 주소 등록해줘야하는데, 내가 S3의 이름을 ‘.com’으로 등록했던것을 발견한 뒤 수정을 ‘.click’으로 하면서 정리해야겠다고 생각해서 정리한다.

  S3는 정적 웹사이트를 위해 빌드를 버켓에 담기 위해 쓴다.


와일드카드로 도메인을 인증 -&amp;gt; 대체도메인도 마찬가지


  HTTPS로 보안이 된 것을 통신하고 싶다.
    
      이것이 로직의 핵심
    
  
  
    ‘클라 - 서버’ : EC2로 만드는 것(VPC 안에서)
  
  로드밸런서로 접속하는건 http로 , Route53으로 DNS 접속하는 것은 https로 접근한다.

",
            "wordcount": "1345",
            "inLanguage": "ko",
            "dateCreated": "2023-04-18/",
            "datePublished": "2023-04-18/",
            "dateModified": "2023-04-18/",
            "author": {
                "@type": "Person",
                "name": "Mr. Anderson",
                
                "image": "/assets/img/uploads/profile.png",
                
                "jobTitle": "The One",
                "url": "http://localhost:4000/authors/mranderson/",
                "sameAs": [
                    "https://github.com/github_username","https://www.facebook.com/facebook_username","https://twitter.com/twitter_username","https://medium.com/@medium_username","https://www.instagram.com/instagram_username","https://www.linkedin.com/in/linkedin_username"
                ]
            },
            "publisher": {
                "@type": "Organization",
                "name": "Hoonology",
                "url": "http://localhost:4000/",
                "logo": {
                    "@type": "ImageObject",
                    "url": "http://localhost:4000/assets/img/blog-image.png",
                    "width": "600",
                    "height": "315"
                }
            },
            "mainEntityOfPage": "True",
            "genre": "AWS",
            "articleSection": "AWS",
            "keywords": ["AWS","cloud","CloudFront","Route53","Sprint"]
        }
        </script>
       </body>
</html>
